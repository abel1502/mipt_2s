import subprocess
import io
import random


def test(cmds):
    inData = "{cmds}\n".format(n=len(cmds), cmds='\n'.join(cmds))
    result = subprocess.run("G.exe", input=inData.encode(), stdout=subprocess.PIPE)
    result2 = subprocess.run("G_reference.exe", input=inData.encode(), stdout=subprocess.PIPE)
    
    return result.returncode == result2.returncode and result.stdout.decode() == result2.stdout.decode()


def genTest():
    h = random.randrange(1, 10 ** 17)
    
    cmds = [random.randrange(1, 100) for _ in range(3)]
    
    cmds = [str(h)] + list(map(str, cmds))
        
    return cmds


def stress(count):
    for i in range(count):
        cmds = genTest()
        
        if not test(cmds):
            print("[Error]", cmds)
            #break
        
        #if i % 20 == 0:
        #    print('.', end='')


stress(100)

#print(test(['16690356642224312', '16', '24', '4']))

"""
[Error] ['14117091694620745', '73506', '846', '26042']
[Error] ['708125391549975313', '74846', '77552', '29854']
[Error] ['63037228996884105', '75032', '75000', '9320']
[Error] ['317912559611023840', '33255', '73215', '73320']
[Error] ['184379481071082812', '26590', '38644', '15938']
[Error] ['672932349496132679', '44080', '18114', '21070']
[Error] ['491714148640178240', '15354', '89409', '68352']
[Error]


[Error] ['78318742075320660', '30686', '92732', '1878']
[Error] ['61831535989560591', '84368', '4690', '43498']
[Error] ['77085181757170850', '89904', '21306', '26912']
[Error] ['99856017447082748', '67578', '76222', '63354']
[Error] ['19156172022239141', '5550', '87768', '59624']
[Error] ['41214761940220249', '82364', '56954', '93790']
[Error] ['88271614382857441', '50145', '94881', '62349']
[Error] ['44678485646022170', '77848', '6416', '69000']
[Error] ['31874931773319190', '26240', '8488', '62730']
[Error]


[Error] ['19432855256069001', '60', '16', '12']
[Error] ['28950932369011397', '66', '78', '86']
[Error] ['33922389683508204', '46', '68', '14']
[Error] ['17493135788718664', '94', '72', '88']
[Error] ['32386888863521130', '68', '50', '88']
[Error] ['16371614249817531', '85', '75', '70']
[Error] ['90948288551555353', '68', '40', '90']
[Error] ['32637451686121058', '46', '76', '82']
[Error] ['79120628152453113', '70', '64', '70']
[Error] ['63773063405282824', '16', '34', '80']
[Error] ['96389236413970698', '54', '26', '92']
[Error] ['64691428382406032', '40', '44', '46']
[Error] ['68607606473949679', '20', '76', '34']
[Error] ['29740628709268749', '66', '82', '94']
[Error] ['88195573649714814', '18', '50', '72']
[Error] ['94843833171538972', '10', '80', '60']
[Error] ['99796034353728164', '64', '18', '54']
[Error] ['47649935396387624', '42', '3', '84']
[Error] ['16690356642224312', '16', '24', '4']

"""